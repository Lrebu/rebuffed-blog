---
title: 电赛25E题：基于01科技K230的视觉方案
published: 2026-03-01
description: "分享一下基于k230的视觉方案"
encrypted: false
pinned: true

alias: "25e-k230-vision"
tags: ["视觉","K230"]
category: "视觉"
---

这是一篇分享K230视觉方案的文章，如有错误指正或优化建议请发送至1599161405@qq.com。
（完整代码在文末）

## 设计思路
下面是本方案的设计思路，接下来分模块地对各个部分进行介绍。

```yaml
摄像头采集 → 矩形检测 → 几何验证 → 透视校正中心 → EMA 平滑追踪 → UART 发送偏移量
```

## 全局参数
参数这一块先不太深入讲东西，主要目的是让大家有个印象。

1.分辨率参数
```yaml
IMG_W, IMG_H = 320, 240        # 图像分辨率
IDE_w, IDE_h = 800, 480        # IDE窗口分辨率
```

2.画面中心参数
```yaml
IMG_CX, IMG_CY = IMG_W // 2, IMG_H // 2   # 画面中心坐标 (160, 120)
```

3.串口通信参数
设置发送时间间隔为30ms（为了和云台主控上串口接收的频率一致，如有其他要求，请自行修改）

```yaml
SEND_INTERVAL_MS = 30           # 串口发送最小间隔（毫秒）
last_send_time = ticks_ms()     # 上次发送的时间戳
```

4.Canny边缘检测与轮廓逼近参数
这些参数大家先有个印象即可，后面回着重讲，尽量给大家讲明白。

```yaml
canny_thresh1      = 50         # Canny 低阈值
canny_thresh2      = 150        # Canny 高阈值
approx_epsilon     = 0.04       # 轮廓逼近精度（周长的比例系数）
area_min_ratio     = 0.001      # 最小面积占图像面积的比例
max_angle_cos      = 0.3        # 轮廓逼近后角点的最大余弦值
gaussian_blur_size = 5          # 高斯模糊核大小（5×5）
```

5.矩形验证阈值
```yaml
RECT_MIN_SIDE   = 20       # 最短边最小像素长度
RECT_ASPECT_MIN = 0.45     # 最短边与最长边之比的下限
RECT_SIDE_RATIO = 0.3      # 对边长度差异容忍比例
RECT_ANGLE_TOL  = 25       # 单角偏离 90° 的最大容差（度）
RECT_DIAG_RATIO = 0.15     # 两条对角线长度差异容忍比例
RECT_AREA_MIN   = 800      # 最小面积（最短边 × 最长边）
```

| 参数      | 几何含义                                                                                                                                                                                                 |
|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `RECT_MIN_SIDE`       | 防止检测到过小的噪声矩形                                                                                                                                                                                      |
| `RECT_ASPECT_MIN`   | 防止长条形四边形                                                                                                                                                                            |
| `RECT_SIDE_RATIO`      | 要求对边近似等长                                                                                                                                                   |
| `RECT_ANGLE_TOL`    | 每个内角与 90° 的偏差不超过 25°                                                                                                                          |
| `RECT_DIAG_RATIO` | 	矩形对角线应近似等长                                                                                                                                                   |                                                                      